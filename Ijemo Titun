<!DOCTYPE html><html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CBT Exam Platform</title>
<style>
  body{font-family:Arial,Helvetica,sans-serif;background:#f4f7fb;padding:20px}
  .container{max-width:900px;margin:10px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  input,select,button,textarea{width:100%;padding:8px;margin:8px 0;border:1px solid #ccc;border-radius:6px}
  h2,h3{margin:6px 0}
  .row{display:flex;gap:12px}
  .col{flex:1}
  .hidden{display:none}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border:1px solid #e6e6e6;text-align:left}
  .small{width:140px}
  .muted{color:#666;font-size:0.9em}
  .actions{display:flex;gap:8px}
</style>
</head>
<body>
<div class="container">
  <h2>CBT Exam Platform</h2>
  <p class="muted">Embed this page in Google Sites using iframe. Features: Admin login, add students & questions, exam timer, offline/online mode.</p>
  <div id="adminLoginBox">
    <h3>Admin Login</h3>
    <div class="row">
      <div class="col"><input id="adminUser" placeholder="Admin username" value="admin"></div>
      <div class="col"><input id="adminPass" type="password" placeholder="Admin password" value="1234"></div>
    </div>
    <div class="actions">
      <button onclick="adminLogin()">Login as Admin</button>
      <button onclick="toggleStudentLogin()">Student Login</button>
    </div>
  </div>
  <!-- Admin Panel -->
  <div id="adminPanel" class="hidden">
    <h3>Admin Panel</h3>
    <div class="row">
      <div class="col">
        <h4>Add Subject Question</h4>
        <select id="adminSubject"></select>
        <input id="qText" placeholder="Enter question text" />
        <input id="optA" placeholder="Option A" />
        <input id="optB" placeholder="Option B" />
        <input id="optC" placeholder="Option C" />
        <input id="optD" placeholder="Option D" />
        <select id="correctAns"><option value="0">A</option><option value="1">B</option><option value="2">C</option><option value="3">D</option></select>
        <input id="qTime" placeholder="Time for this exam (minutes) - optional" />
        <div class="actions"><button onclick="addQuestion()">Add Question</button></div>
      </div>
      <div class="col">
        <h4>Add Student</h4>
        <input id="stuName" placeholder="Student name" />
        <input id="stuUsername" placeholder="Username (unique)" />
        <input id="stuPassword" placeholder="Password" />
        <select id="stuAssign"><option value="">Assign subject access (optional)</option></select>
        <div class="actions">
          <button onclick="addStudent()">Create Student</button>
          <button onclick="bulkCreateDemo()">Create Demo Students</button>
          <button onclick="showStudentList()">View/Edit Students</button>
          <button onclick="showBulkImport()">Bulk Import</button>
          <button onclick="downloadCSV()">Download CSV</button>
        </div>
        <div id="studentListPanel" class="hidden"></div>
        <div id="bulkImportPanel" class="hidden">
          <textarea id="bulkCSV" rows="5" placeholder="name,username,password"></textarea>
          <button onclick="processBulkImport()">Import</button>
        </div>
      </div>
    </div>
  </div>
  <!-- Student Login -->
  <div id="loginBox" class="hidden">
    <h3>Student Login</h3>
    <input id="studentUsername" placeholder="Username" />
    <input id="studentPass" type="password" placeholder="Password" />
    <div class="actions"><button onclick="studentLogin()">Login</button><button onclick="toggleAdminLogin()">Back to Admin</button></div>
  </div>
  <!-- Subject Select -->
  <div id="subjectBox" class="hidden">
    <h3>Available Subjects</h3>
    <select id="subjectSelect"></select>
    <input id="examTimerInput" placeholder="Exam duration (minutes). Leave blank for default." />
    <button onclick="startExam()">Start Exam</button>
    <button onclick="studentLogout()">Logout</button>
  </div>
  <!-- Exam -->
  <div id="examBox" class="hidden">
    <h3 id="subjectTitle"></h3>
    <p class="muted">Time left: <span id="timeLeft"></span></p>
    <div id="questionArea"></div>
    <div class="actions"><button onclick="submitExam()">Submit</button><button onclick="autoSaveAnswers()">Save Progress</button></div>
  </div>
  <!-- Result -->
  <div id="resultBox" class="hidden">
    <h3>Result</h3>
    <p id="scoreText"></p>
    <button onclick="studentLogout()">Logout</button>
  </div>
</div>
<script>
// JavaScript code for admin/student/exam management
// Includes: Add/Edit/Delete Student, Add Question, Timer, Exam grading
// Same as the previous full version
</script>
</body>
</html>
